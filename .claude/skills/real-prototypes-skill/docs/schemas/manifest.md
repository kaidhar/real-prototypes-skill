# Manifest Schema

The `manifest.json` file is generated by the capture engine and describes all captured pages, their assets, and metadata.

## Complete Example

```json
{
  "platform": {
    "name": "My Platform",
    "baseUrl": "https://app.example.com",
    "capturedAt": "2024-01-15T10:30:00.000Z"
  },
  "pages": [
    {
      "name": "dashboard",
      "url": "/dashboard",
      "screenshot": "screenshots/dashboard-desktop.png",
      "html": "html/dashboard.html",
      "description": "Main dashboard page",
      "captures": [
        {
          "viewport": "desktop",
          "screenshot": "screenshots/dashboard-desktop.png"
        },
        {
          "viewport": "tablet",
          "screenshot": "screenshots/dashboard-tablet.png"
        },
        {
          "viewport": "mobile",
          "screenshot": "screenshots/dashboard-mobile.png"
        }
      ],
      "tabs": [
        {
          "name": "Overview",
          "screenshot": "screenshots/dashboard-tab-overview.png"
        },
        {
          "name": "Activity",
          "screenshot": "screenshots/dashboard-tab-activity.png"
        }
      ],
      "interactions": [
        {
          "type": "dropdown",
          "name": "Actions",
          "screenshot": "screenshots/dashboard-dropdown-actions.png"
        }
      ]
    },
    {
      "name": "accounts-list",
      "url": "/accounts",
      "screenshot": "screenshots/accounts-list-desktop.png",
      "html": "html/accounts-list.html",
      "description": "accounts list page",
      "captures": [
        {
          "viewport": "desktop",
          "screenshot": "screenshots/accounts-list-desktop.png"
        }
      ],
      "tabs": [],
      "interactions": []
    }
  ],
  "stats": {
    "pagesDiscovered": 12,
    "pagesCaptured": 12,
    "screenshotsTaken": 36,
    "htmlCaptured": 12,
    "interactionsPerformed": 8,
    "errorsEncountered": 0
  },
  "designTokens": "design-tokens.json"
}
```

## Schema Reference

### Root Object

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `platform` | object | Yes | Platform metadata |
| `pages` | array | Yes | List of captured pages |
| `stats` | object | Yes | Capture statistics |
| `designTokens` | string | Yes | Path to design tokens file |

### `platform`

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | string | Yes | Platform name |
| `baseUrl` | string | Yes | Base URL of the platform |
| `capturedAt` | string | Yes | ISO 8601 timestamp of capture |

### `pages[]`

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | string | **Yes** | Unique page identifier (derived from URL path) |
| `url` | string | Yes | URL path (relative to baseUrl) |
| `screenshot` | string | Yes | Path to primary screenshot (relative to references dir) |
| `html` | string | No | Path to HTML file |
| `description` | string | No | Auto-generated page description |
| `captures` | array | Yes | Screenshots at different viewports |
| `tabs` | array | No | Tab state captures |
| `interactions` | array | No | Interaction state captures |

**Important:** The `name` field is required. Validation will fail if pages are missing names.

### `pages[].captures[]`

| Field | Type | Description |
|-------|------|-------------|
| `viewport` | string | Viewport name (e.g., "desktop", "mobile") |
| `screenshot` | string | Path to screenshot file |

### `pages[].tabs[]`

| Field | Type | Description |
|-------|------|-------------|
| `name` | string | Tab label text |
| `screenshot` | string | Path to screenshot of tab content |

### `pages[].interactions[]`

| Field | Type | Description |
|-------|------|-------------|
| `type` | string | Interaction type: `"dropdown"`, `"modal"`, `"expanded"` |
| `name` | string | Element name/label |
| `screenshot` | string | Path to screenshot of interaction state |

### `stats`

| Field | Type | Description |
|-------|------|-------------|
| `pagesDiscovered` | number | Total pages found during discovery |
| `pagesCaptured` | number | Pages successfully captured |
| `screenshotsTaken` | number | Total screenshots taken |
| `htmlCaptured` | number | HTML files saved |
| `interactionsPerformed` | number | Interactive elements captured |
| `errorsEncountered` | number | Errors during capture |

## Validation Requirements

For validation to pass, the manifest must have:

1. **All pages have a `name` field** - This is used for page identification
2. **All referenced screenshots exist** - Paths in `screenshot` fields must be valid
3. **Minimum page count** - Default is 5 pages (configurable)
4. **List-detail pattern** - If list pages exist, detail pages should be captured

## File Path Convention

All paths in the manifest are relative to the references directory:

```
references/
  manifest.json          # This file
  design-tokens.json     # Referenced as "design-tokens.json"
  screenshots/
    dashboard-desktop.png  # Referenced as "screenshots/dashboard-desktop.png"
  html/
    dashboard.html         # Referenced as "html/dashboard.html"
```
